# A Large-Scale Dataset for Molecular Structure-Language Description via a Rule-Regularized Method

[![arXiv](https://img.shields.io/badge/arXiv-2602.02320-b31b1b.svg)](https://arxiv.org/abs/2602.02320)
[![Hugging Face](https://img.shields.io/badge/ðŸ¤—%20Datasets-ChemFM%2FMolLangData-yellow)](https://huggingface.co/datasets/ChemFM/MolLangData)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

**MolLangData** provides large-scale paired data of molecular structures and language descriptions generated by a rule-regularized method.

> **This repository is under construction.**  
> The dataset is already available on [Hugging Face](https://huggingface.co/datasets/ChemFM/MolLangData). We are actively preparing code and documentation for the full data-collection pipeline. See [TODO](#todo--roadmap) below.

---

## Dataset

- **Hugging Face:** [ChemFM/MolLangData](https://huggingface.co/datasets/ChemFM/MolLangData) â€” download and use the dataset.
- **Related benchmark:** [MolLangBench](https://github.com/TheLuoFengLab/MolLangBench) â€” human-curated benchmark for molecular structure recognition, editing, and generation. The generation task is similar to the structural description in this work but can be regarded as a standard evaluation, since it is human-curated and rigorously validated.

---

## Collaboration Wanted

We are actively continuing research on molecularâ€“language alignment, including dataset curation and multimodal model development.

We welcome collaborators who are interested in working together in this area.  Please contact [Feiyang Cai](mailto:feiyang@clemson.edu) to discuss potential collaboration.

---

## OPSIN (IUPAC â†’ XML / SMILES)

We use a customized [OPSIN](https://github.com/feiyang-cai/opsin_mollangdata) fork that adds **complete XML structure metadata** for building prompts:

- **Fork:** [feiyang-cai/opsin_mollangdata](https://github.com/feiyang-cai/opsin_mollangdata)
- The code there is for reference; we provide a **compiled JAR** for easy use in the simple demo (see below).
- **OPSIN README** and usage instructions will be updated later (see [TODO](#todo--roadmap)).

---

## Requirements

- **Python**: 3.8+
- **Java**: a working `java` runtime on PATH (JRE/JDK)
- **Python dependencies**: `pip install -r requirements.txt` (installs `openai`, `rdkit`). 

---

## Single molecule: get prompt and description from IUPAC

The script **`get_prompt_description_from_iupac.py`** takes **one IUPAC name**, runs OPSIN to get XML and SMILES, computes the **difficulty level** (easy / medium / hard) from the structure, builds the prompt, and optionally calls an LLM to get a structure description.

**Contents**

- `get_prompt_description_from_iupac.py` â€” main script
- `jar/` â€” place the OPSIN jar here: `jar/opsin-core-*-jar-with-dependencies.jar`
- `prompts/smiles_iupac_metadata_v13/` â€” prompt template and semantic sections (default, bridged/fused/spiro ring semantics)
- `config/llm_config.json` â€” LLM backend (Azure / OpenAI), model and reasoning effort per difficulty (easy/medium/hard), timeouts, etc. (used only with `--get-description`)

**Run** (from repo root)

Print OPSIN output, difficulty level, and prompt only (no LLM):

```bash
python3 get_prompt_description_from_iupac.py "3,4-dihydro-2H-1,5-benzodioxepin-7-yl-(2-fluorophenyl)methanone"
```

Get description from LLM (model/reasoning chosen by difficulty level; Azure or OpenAI per config) and print everything:

```bash
python3 get_prompt_description_from_iupac.py "3,4-dihydro-2H-1,5-benzodioxepin-7-yl-(2-fluorophenyl)methanone" --get-description
```

Write output to a folder (prompt â†’ `prompt.md`, description â†’ `descriptions.txt`, metadata â†’ `generation_info.json`):

```bash
python3 get_prompt_description_from_iupac.py "ethane" --get-description -o out/
```

<details>
<summary><strong>Options</strong></summary>

- `--opsin-jar PATH` â€” path to OPSIN jar (default: `jar/opsin-core-*-jar-with-dependencies.jar`)
- `--prompts-dir DIR` â€” prompt templates directory (default: `prompts/smiles_iupac_metadata_v13`)
- `-o DIR` / `--output DIR` â€” output folder: writes `prompt.md`, and if `--get-description` also `descriptions.txt` and `generation_info.json`; if omitted, everything is printed to stdout
- `--get-description` â€” call LLM to generate structure description (uses `config/llm_config.json` unless overridden)
- `--llm-config FILE` â€” LLM config JSON (default: `config/llm_config.json`)
- `--model MODEL` â€” override model for LLM
- `--reasoning-effort EFFORT` â€” override reasoning effort for LLM

</details>

<details>
<summary><strong>Output</strong></summary>

- Without `-o`: prints IUPAC, OPSIN status, SMILES, difficulty level, and (if `--get-description`) description and prompt.
- With `-o DIR`: writes `DIR/prompt.md`, and when using `--get-description` also `DIR/descriptions.txt` and `DIR/generation_info.json` (backend, model, reasoning effort, duration, etc.).

</details>

---

## TODO / Roadmap

- [ ] **Full pipeline to collect the data**
  - [x] **Simple generation code** â€” minimal script to go from IUPAC (or SMILES) + metadata to one description (single LLM call).
  - [x] **Routing example** â€” example of difficulty-based routing (easy / medium / hard) and model/reasoning settings.
  - [ ] **Whole pipeline** â€” batch workflow: prepare prompts (e.g. from a molecule list), call batch API to generate descriptions, optional validation and export .
- [ ] **OPSIN** â€” README and usage instructions are maintained in [feiyang-cai/opsin_mollangdata](https://github.com/feiyang-cai/opsin_mollangdata); this repo will link to it and document how the JAR is used in our pipeline.

---

## Citation

If you use MolLangData in your research, please cite:

```bibtex
@article{MolLangData,
  title={A Large-Scale Dataset for Molecular Structure-Language Description via a Rule-Regularized Method},
  author={Cai, Feiyang and He, Guijuan and Hu, Yi and Wang, Jingjing and Luo, Joshua and Zhu, Tianyu and Pilla, Srikanth and Li, Gang and Liu, Ling and Luo, Feng},
  year={2026},
  journal={arXiv preprint arXiv:2602.02320},
}
```

---

## License

This project is licensed under the [MIT License](LICENSE).

---

## Contact

- **Maintainer:** Feiyang Cai ([feiyang@clemson.edu](mailto:feiyang@clemson.edu))
